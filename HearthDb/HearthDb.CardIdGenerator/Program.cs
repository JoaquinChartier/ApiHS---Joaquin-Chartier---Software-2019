#region

using System.IO;
using Microsoft.CodeAnalysis;
using Microsoft.CodeAnalysis.Formatting;
using Microsoft.CodeAnalysis.MSBuild;
using static Microsoft.CodeAnalysis.CSharp.SyntaxFactory;
using static Microsoft.CodeAnalysis.CSharp.SyntaxKind;

#endregion

namespace HearthDb.CardIdGenerator
{
	internal class Program
	{
		private const string File = "../../../HearthDb/CardIds.cs";

		static void Main()
		{
			var @namespace = NamespaceDeclaration(IdentifierName("HearthDb"));
			var header = ParseLeadingTrivia(@"/* THIS CLASS WAS GENERATED BY HearthDb.CardIdGenerator. DO NOT EDIT. */");
			var cCardIds = ClassDeclaration("CardIds").AddModifiers(Token(PublicKeyword)).WithLeadingTrivia(header);
			var cCollectible = SyntaxBuilder.GetCollectible();
			var cNonCollectible = SyntaxBuilder.GetNonCollectible();

			cCardIds = cCardIds.AddMembers(cCollectible);
			cCardIds = cCardIds.AddMembers(cNonCollectible);
			@namespace = @namespace.AddMembers(cCardIds);
			var root = Formatter.Format(@namespace, MSBuildWorkspace.Create());
			using(var sr = new StreamWriter(File))
				sr.Write(root.ToString());
		}
	}
}